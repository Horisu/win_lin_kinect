syntax = "proto3";

option java_package = "ex.grpc";
option objc_class_prefix = "RTG";

package kinectrgbd;

service KinectRgbd {
  rpc CheckRequest(Header) returns (Request) {}
  rpc SendPoints(stream Points) returns (Response) {}
  rpc SendImage(stream Pixels) returns (Response) {}
  rpc ReturnPositionsFromPixels(DataStream) returns (Response) {}
  rpc ReturnPixelBoundsFromSpaceBounds(BitStream) returns (Response) {}
  rpc ReturnCognition(DataStream) returns (Response) {}
}

message Header {
  bool data = 1;
}

message Bit {
  float x = 1;
  float y = 2;
  float width = 3;
  float height = 4;
  string name = 5;
}

message Request {
  int32 mode = 1;
  repeated Bit data = 2;
  bool once = 3;
  string args = 4;
}

message Response {
  bool finish = 1;
}

message Pixels {
  repeated int32 color = 1;
}

message Point {
  float x = 1;
  float y = 2;
  float z = 3;
  int32 color = 4;
}

message Points {
  repeated Point data = 1;
}

message Tag {
  string tag = 1;
  float confidence = 2;
}

message Data {
  float x = 1;
  float y = 2;
  float z = 3;
  repeated Tag captions = 4;
  repeated Tag tags = 5;
  repeated string texts = 6;
  bool status = 7;
}

message DataStream {
  bool status = 1;
  repeated Data data = 2;
}

message BitStream {
  bool status = 1;
  repeated Bit data = 2;
}